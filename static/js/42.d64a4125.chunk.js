"use strict";(self.webpackChunkjx3dps_online=self.webpackChunkjx3dps_online||[]).push([[42],{5042:(e,l,n)=>{n.r(l),n.d(l,{default:()=>N});var t=n(6865),o=n(3119),i=n(1132),s=n(4443),d=n(1303),a=n(5417),r=n(4303),c=n(8929),u=n(73),v=n(7048),p=n(7555),x=n(2331),m=n(2034),y=n(9242),h=n(7059),j=n(5341),A=n(7497),g=n(2015),f=n(6309);const C=e=>{let{"\u5faa\u73af\u6807\u8bc6":l,"\u8bbe\u7f6e\u5faa\u73af\u6807\u8bc6":n}=e;const{"\u5168\u90e8\u5faa\u73af":o=[]}=(0,c.A)(),[d,r]=(0,t.useState)(),u=(0,a.G)((e=>{var l;return null===e||void 0===e||null===(l=e.data)||void 0===l?void 0:l.\u81ea\u5b9a\u4e49\u5faa\u73af\u5217\u8868})),[v,p]=(0,t.useState)([]);(0,t.useEffect)((()=>{p(null===u||void 0===u?void 0:u.map((e=>null===e||void 0===e?void 0:e.\u540d\u79f0)))}),[u]);const x=()=>{d?null!==o&&void 0!==o&&o.some((e=>(null===e||void 0===e?void 0:e.\u540d\u79f0)===d))||null!==v&&void 0!==v&&v.includes(d)?i.Ay.error("\u548c\u5df2\u5b58\u5728\u5faa\u73af\u552f\u4e00\u6807\u8bc6\u51b2\u7a81\uff0c\u8bf7\u66f4\u6362\u6807\u8bc6"):(p([...v,d]),r(void 0)):i.Ay.error("\u8bf7\u8f93\u5165\u5faa\u73af\u552f\u4e00\u6807\u8bc6")};return(0,f.jsx)(j.A,{style:{width:"100%"},value:l,onChange:n,optionLabelProp:"label",placeholder:"\u8bf7\u9009\u62e9\u4f60\u8981\u8986\u76d6\u7684\u5faa\u73af",options:v.map((e=>({label:e,value:e}))),dropdownRender:e=>(0,f.jsxs)(f.Fragment,{children:[e,(0,f.jsx)(A.A,{style:{margin:"8px 0"}}),(0,f.jsxs)("div",{className:"cycle-select-add-input-wrap",children:[(0,f.jsx)(g.A,{placeholder:"\u8bf7\u8f93\u5165\u5faa\u73af\u6807\u8bc6",value:d,onChange:e=>{var l;return r(null===e||void 0===e||null===(l=e.target)||void 0===l?void 0:l.value)},onKeyDown:e=>e.stopPropagation(),onPressEnter:()=>x()}),(0,f.jsx)(s.Ay,{type:"text",icon:(0,f.jsx)(h.A,{}),onClick:x,children:"\u521b\u5efa\u65b0\u5faa\u73af"})]})]})})},{Dragger:b}=v.A,k=e=>{const{open:l,onCancel:n}=e,[o,s]=(0,t.useState)(!1),[d,r]=(0,t.useState)(),[c,v]=(0,t.useState)(),h=(0,a.j)(),j=(0,a.G)((e=>{var l;return null===e||void 0===e||null===(l=e.data)||void 0===l?void 0:l.\u81ea\u5b9a\u4e49\u5faa\u73af\u5217\u8868}));return(0,f.jsx)(p.A,{open:l,onCancel:n,title:"\u5bfc\u5165\u5faa\u73af",onOk:e=>{if(!c)return void i.Ay.error("\u8bf7\u9009\u62e9/\u8f93\u5165\u5faa\u73af\u6807\u8bc6");if(!d)return void i.Ay.error("\u8bf7\u5bfc\u5165\u6587\u4ef6");const l=null!==j&&void 0!==j&&j.some((e=>(null===e||void 0===e?void 0:e.\u540d\u79f0)===c))?j.map((e=>e.\u540d\u79f0===c?d:e)):(j||[]).concat([d]);h((0,u.wv)(l)),i.Ay.success("\u5bfc\u5165\u6210\u529f"),null===n||void 0===n||n(e)},children:(0,f.jsxs)(x.A,{spinning:o,tip:"\u89e3\u6790\u4e2d",children:[(0,f.jsx)("div",{className:"cycle-setting-import-select-wrap",children:(0,f.jsx)(C,{"\u5faa\u73af\u6807\u8bc6":c,"\u8bbe\u7f6e\u5faa\u73af\u6807\u8bc6":v})}),null!==d&&void 0!==d&&d.\u540d\u79f0?(0,f.jsx)("div",{className:"cycle-setting-import-res",children:(0,f.jsx)(m.A,{type:"success",message:`\u8bc6\u522b\u5faa\u73af\uff1a${null===d||void 0===d?void 0:d.\u540d\u79f0}`,closable:!0,afterClose:()=>r(void 0)})}):(0,f.jsx)("div",{children:(0,f.jsxs)(b,{name:"file",fileList:[],beforeUpload:e=>{(e=>{const l=e,n=new FileReader;s(!0),n.readAsText(l),n.onload=()=>{if(n.result)try{const e=JSON.parse(n.result);null!==e&&void 0!==e&&e.\u540d\u79f0?r(e):i.Ay.error("\u5bfc\u5165\u5931\u8d25\uff0c\u8bf7\u68c0\u67e5\u6587\u4ef6\u683c\u5f0f")}catch(e){i.Ay.error("\u5bfc\u5165\u5931\u8d25\uff0c\u8bf7\u68c0\u67e5\u6587\u4ef6\u683c\u5f0f")}s(!1)}})(e)},className:"tools-daoru-dragger",children:[(0,f.jsx)("p",{className:"ant-upload-drag-icon",children:(0,f.jsx)(y.A,{})}),(0,f.jsx)("p",{className:"ant-upload-text",children:"\u70b9\u51fb\u4e0a\u4f20\u6216\u62d6\u62fd\u4e0a\u4f20\u5faa\u73afJSON\u6587\u4ef6"})]})})]})})},{"\u7f13\u5b58\u6620\u5c04":w}=(0,r.A)();const N=function(){const{modal:e}=o.A.useApp(),{"\u5168\u90e8\u5faa\u73af":l=[]}=(0,c.A)(),[n,r]=(0,t.useState)(!1),v=(0,a.G)((e=>{var l;return null===e||void 0===e||null===(l=e.data)||void 0===l?void 0:l.\u81ea\u5b9a\u4e49\u5faa\u73af\u5217\u8868})),p=(0,a.j)();return(0,t.useEffect)((()=>{var e;const l={};(v||[]).forEach((e=>{l[e.\u540d\u79f0]={...e}})),null===(e=localStorage)||void 0===e||e.setItem(w.\u81ea\u5b9a\u4e49\u5faa\u73af,JSON.stringify(l))}),[v]),(0,f.jsxs)("div",{children:[(0,f.jsx)("div",{className:"cycle-setting-btns",children:(0,f.jsx)(s.Ay,{type:"primary",className:"cycle-setting-btn",onClick:()=>r(!0),children:"\u5bfc\u5165\u5faa\u73af"})}),(0,f.jsx)(k,{open:n,onCancel:()=>r(!1)}),(0,f.jsx)(d.A,{dataSource:l,size:"small",pagination:!1,scroll:{y:500},columns:[{title:"\u552f\u4e00\u6807\u8bc6",dataIndex:"\u540d\u79f0"},{title:"\u5faa\u73af\u6807\u9898",dataIndex:"\u6807\u9898",render:(e,l)=>(null===l||void 0===l?void 0:l.\u6807\u9898)||(null===l||void 0===l?void 0:l.\u540d\u79f0)},{title:"\u63d0\u4f9b\u8005",dataIndex:"\u63d0\u4f9b\u8005"},{title:"\u7c7b\u578b",dataIndex:"\u7c7b\u578b",width:80},{title:"\u6807\u8bb0",dataIndex:"\u6807\u8bb0",width:80},{title:"\u64cd\u4f5c",dataIndex:"\u64cd\u4f5c",render:(l,n)=>{const t=null===v||void 0===v?void 0:v.some((e=>(null===e||void 0===e?void 0:e.\u540d\u79f0)===(null===n||void 0===n?void 0:n.\u540d\u79f0)));return(0,f.jsxs)("div",{className:"cycle-setting-list-btns",children:[(0,f.jsx)(s.Ay,{size:"small",type:"link",onClick:()=>(e=>{const l=document.createElement("a");l.setAttribute("href","data:text/plain;charset=utf-8,"+encodeURIComponent(JSON.stringify(e))),l.setAttribute("download","\u8ba1\u7b97\u5668\u6570\u636e\u8fc1\u79fb.json"),l.style.display="none",document.body.appendChild(l),l.click(),document.body.removeChild(l),i.Ay.success("\u5faa\u73af\u5df2\u5bfc\u51fa")})(n),children:"\u5bfc\u51fa"}),t?(0,f.jsx)(f.Fragment,{children:(0,f.jsx)(s.Ay,{size:"small",type:"link",danger:!0,onClick:()=>{return l=n,void e.confirm({title:`\u786e\u5b9a\u8981\u5220\u9664\u5faa\u73af${null===l||void 0===l?void 0:l.\u540d\u79f0}\u5417\uff1f`,content:"\u5220\u9664\u540e\u5c06\u65e0\u6cd5\u6062\u590d",onOk(){const e=null===v||void 0===v?void 0:v.filter((e=>(null===e||void 0===e?void 0:e.\u540d\u79f0)!==(null===l||void 0===l?void 0:l.\u540d\u79f0)));p((0,u.wv)(e)),i.Ay.success("\u5220\u9664\u6210\u529f")}});var l},children:"\u5220\u9664"})}):null]})}}]})]})}}}]);
//# sourceMappingURL=42.d64a4125.chunk.js.map