{"version":3,"file":"static/js/28.8e7ae702.chunk.js","mappings":"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","sources":["功能模块/系统工具/页面右下角工具/网页工具/JCL技能序列导入/index.tsx"],"sourcesContent":["import React, { useEffect, useRef, useState } from 'react'\nimport { Button, Spin, Upload, message } from 'antd'\n// import { JCL技能序列导入 } from './JCL技能序列导入'\nimport { InboxOutlined } from '@ant-design/icons'\nimport './index.css'\nimport { downloadCSV } from '@/工具函数/help'\nconst { Dragger } = Upload\n\nfunction JclSkillDaoru() {\n  const [loading, setLoading] = useState<boolean>(false)\n  const [shuju, setShuju] = useState<any>()\n  const workerRef = useRef<Worker | null>(null)\n\n  useEffect(() => {\n    // 创建 Worker 实例\n    workerRef.current = new Worker(new URL('./worker.ts', import.meta.url))\n\n    // 定义接收 Worker 消息的回调\n    workerRef.current.onmessage = (event) => {\n      if (event.data?.length) {\n        setShuju(event.data?.join(','))\n      } else {\n        message.error('该心法不支持或解析失败')\n      }\n      setLoading(false)\n    }\n\n    // 清理 Worker\n    return () => {\n      workerRef.current?.terminate()\n    }\n  }, [])\n\n  const copy = () => {\n    const res = document.getElementById('tools-daoru-zhuangbei-result')\n    if (res) {\n      const text = res?.innerHTML\n      if (text) {\n        const input = document.createElement('input')\n        document.body.appendChild(input)\n        input.setAttribute('value', text)\n        input.select()\n        document.execCommand('copy') // 执行浏览器复制命令\n        if (document.execCommand('copy')) {\n          document.execCommand('copy')\n          message.success('复制成功')\n        }\n        if (text?.includes('未匹配')) {\n          message.warning('存在未匹配装备')\n        }\n        document.body.removeChild(input)\n      }\n    }\n  }\n\n  const handleFileChange = (e) => {\n    const file = e\n    const reader = new FileReader()\n    reader.readAsText(file)\n    reader.onload = () => {\n      if (reader.result) {\n        setLoading(true)\n        if (workerRef.current) {\n          workerRef.current.postMessage(reader.result)\n        }\n      }\n    }\n  }\n\n  const download = () => {\n    let res = shuju?.split(',')\n    if (shuju?.includes('起点')) {\n      let a: string[][] = []\n      shuju?.split(',')?.forEach((item) => {\n        if (item === '起点') {\n          if (a?.length) {\n            a = [...a, []]\n          } else {\n            a = [[]]\n          }\n        } else {\n          if (a?.length) {\n            a[a.length - 1] = [...a[a.length - 1], item]\n          } else {\n            a = [[item]]\n          }\n        }\n      })\n      res = a\n    }\n    downloadCSV(res)\n  }\n\n  return (\n    <Spin spinning={loading} tip='解析中'>\n      <div>\n        <Dragger\n          name='file'\n          fileList={[]}\n          beforeUpload={(file) => {\n            handleFileChange(file)\n          }}\n          className={'tools-daoru-dragger'}\n        >\n          <p className='ant-upload-drag-icon'>\n            <InboxOutlined />\n          </p>\n          <p className='ant-upload-text'>点击上传JCL文件</p>\n        </Dragger>\n        <div className={'tools-daoru-btns'}>\n          <Button type='primary' disabled={!shuju} className='tools-daoru-btn' onClick={copy}>\n            复制\n          </Button>\n          <Button disabled={!shuju} className='tools-daoru-btn' onClick={download}>\n            下载\n          </Button>\n          {/* <Button onClick={getDetail}>转换</Button> */}\n        </div>\n        {shuju && (\n          <div id='tools-daoru-zhuangbei-result' className={'tools-daoru-result'}>\n            {shuju}\n          </div>\n        )}\n      </div>\n    </Spin>\n  )\n}\n\nexport default JclSkillDaoru\n"],"names":["Dragger","Upload","loading","setLoading","useState","shuju","setShuju","workerRef","useRef","useEffect","current","Worker","URL","onmessage","event","_event$data","_event$data2","data","length","join","message","error","_workerRef$current","terminate","_jsx","Spin","spinning","tip","children","_jsxs","name","fileList","beforeUpload","file","e","reader","FileReader","readAsText","onload","result","postMessage","handleFileChange","className","InboxOutlined","Button","type","disabled","onClick","copy","res","document","getElementById","text","innerHTML","input","createElement","body","appendChild","setAttribute","select","execCommand","success","includes","warning","removeChild","download","split","_shuju$split","a","forEach","item","_a","_a2","downloadCSV","id"],"sourceRoot":""}