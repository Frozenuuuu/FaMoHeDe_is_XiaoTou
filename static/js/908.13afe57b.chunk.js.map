{"version":3,"file":"static/js/908.13afe57b.chunk.js","mappings":"uQAMQA,EAAYC,EAAAA,EAAAA,QA0HpB,MAxHA,WACE,OAA8BC,EAAAA,EAAAA,WAAkB,GAAhD,eAAOC,EAAP,KAAgBC,EAAhB,KACA,GAA0BF,EAAAA,EAAAA,YAA1B,eAAOG,EAAP,KAAcC,EAAd,KACMC,GAAYC,EAAAA,EAAAA,QAAsB,MAkFxC,OAhFAC,EAAAA,EAAAA,YAAU,WAeR,OAbAF,EAAUG,QAAU,IAAIC,OAAO,IAAIC,IAAI,mBAGvCL,EAAUG,QAAQG,UAAY,SAACC,GAAW,IAAD,EACf,EAAxB,UAAIA,EAAMC,YAAV,OAAI,EAAYC,OACdV,EAAQ,UAACQ,EAAMC,YAAP,aAAC,EAAYE,KAAK,MAE1BC,EAAAA,GAAAA,MAAc,sEAEhBd,GAAW,EACZ,EAGM,WAAO,IAAD,EACX,UAAAG,EAAUG,eAAV,SAAmBS,WACpB,CACF,GAAE,KA+DD,SAAC,IAAD,CAAMC,SAAUjB,EAASkB,IAAI,qBAA7B,UACE,4BACE,UAACrB,EAAD,CACEsB,KAAK,OACLC,SAAU,GACVC,aAAc,SAACC,IA5CE,SAACC,GACxB,IAAMD,EAAOC,EACPC,EAAS,IAAIC,WACnBD,EAAOE,WAAWJ,GAClBE,EAAOG,OAAS,WACVH,EAAOI,SACT3B,GAAW,GACPG,EAAUG,SACZH,EAAUG,QAAQsB,YAAYL,EAAOI,QAG1C,CACF,CAiCSE,CAAiBR,EAClB,EACDS,UAAW,sBANb,WAQE,cAAGA,UAAU,uBAAb,UACE,SAACC,EAAA,EAAD,OAEF,cAAGD,UAAU,kBAAb,yDAEF,iBAAKA,UAAW,mBAAhB,WACE,SAAC,KAAD,CAAQE,KAAK,UAAUC,UAAWhC,EAAO6B,UAAU,kBAAkBI,QA7EhE,WACX,IAAMC,EAAMC,SAASC,eAAe,gCACpC,GAAIF,EAAK,CACP,IAAMG,EAAI,OAAGH,QAAH,IAAGA,OAAH,EAAGA,EAAKI,UAClB,GAAID,EAAM,CACR,IAAME,EAAQJ,SAASK,cAAc,SACrCL,SAASM,KAAKC,YAAYH,GAC1BA,EAAMI,aAAa,QAASN,GAC5BE,EAAMK,SACNT,SAASU,YAAY,QACjBV,SAASU,YAAY,UACvBV,SAASU,YAAY,QACrBhC,EAAAA,GAAAA,QAAgB,6BAElB,OAAIwB,QAAJ,IAAIA,GAAAA,EAAMS,SAAS,uBACjBjC,EAAAA,GAAAA,QAAgB,8CAElBsB,SAASM,KAAKM,YAAYR,EAC3B,CACF,CACF,EAyDO,2BAGA,SAAC,KAAD,CAAQP,UAAWhC,EAAO6B,UAAU,kBAAkBI,QA5C7C,WACf,IAAIC,EAAG,OAAGlC,QAAH,IAAGA,OAAH,EAAGA,EAAOgD,MAAM,KACvB,UAAIhD,QAAJ,IAAIA,GAAAA,EAAO8C,SAAS,gBAAO,CAAC,IAAD,EACrBG,EAAgB,GACf,OAALjD,QAAK,IAALA,GAAA,UAAAA,EAAOgD,MAAM,YAAb,SAAmBE,SAAQ,SAACC,GACN,IAAD,EAMZ,EANM,iBAATA,EAEAF,EADF,UAAIA,SAAJ,OAAI,EAAGtC,OACJ,kBAAOsC,GAAP,CAAU,KAEP,CAAC,IAGP,UAAIA,SAAJ,OAAI,EAAGtC,OACLsC,EAAEA,EAAEtC,OAAS,GAAb,kBAAsBsC,EAAEA,EAAEtC,OAAS,IAAnC,CAAuCwC,IAEvCF,EAAI,CAAC,CAACE,GAGX,IACDjB,EAAMe,CACP,EACDG,EAAAA,EAAAA,IAAYlB,EACb,EAsBO,6BAKDlC,IACC,gBAAKqD,GAAG,+BAA+BxB,UAAW,qBAAlD,SACG7B,QAMZ,C","sources":["功能模块/系统工具/页面右下角工具/网页工具/JCL技能序列导入/index.tsx"],"sourcesContent":["import React, { useEffect, useRef, useState } from 'react'\nimport { Button, Spin, Upload, message } from 'antd'\n// import { JCL技能序列导入 } from './JCL技能序列导入'\nimport { InboxOutlined } from '@ant-design/icons'\nimport './index.css'\nimport { downloadCSV } from '@/工具函数/help'\nconst { Dragger } = Upload\n\nfunction JclSkillDaoru() {\n  const [loading, setLoading] = useState<boolean>(false)\n  const [shuju, setShuju] = useState<any>()\n  const workerRef = useRef<Worker | null>(null)\n\n  useEffect(() => {\n    // 创建 Worker 实例\n    workerRef.current = new Worker(new URL('./worker.ts', import.meta.url))\n\n    // 定义接收 Worker 消息的回调\n    workerRef.current.onmessage = (event) => {\n      if (event.data?.length) {\n        setShuju(event.data?.join(','))\n      } else {\n        message.error('该心法不支持或解析失败')\n      }\n      setLoading(false)\n    }\n\n    // 清理 Worker\n    return () => {\n      workerRef.current?.terminate()\n    }\n  }, [])\n\n  const copy = () => {\n    const res = document.getElementById('tools-daoru-zhuangbei-result')\n    if (res) {\n      const text = res?.innerHTML\n      if (text) {\n        const input = document.createElement('input')\n        document.body.appendChild(input)\n        input.setAttribute('value', text)\n        input.select()\n        document.execCommand('copy') // 执行浏览器复制命令\n        if (document.execCommand('copy')) {\n          document.execCommand('copy')\n          message.success('复制成功')\n        }\n        if (text?.includes('未匹配')) {\n          message.warning('存在未匹配装备')\n        }\n        document.body.removeChild(input)\n      }\n    }\n  }\n\n  const handleFileChange = (e) => {\n    const file = e\n    const reader = new FileReader()\n    reader.readAsText(file)\n    reader.onload = () => {\n      if (reader.result) {\n        setLoading(true)\n        if (workerRef.current) {\n          workerRef.current.postMessage(reader.result)\n        }\n      }\n    }\n  }\n\n  const download = () => {\n    let res = shuju?.split(',')\n    if (shuju?.includes('起点')) {\n      let a: string[][] = []\n      shuju?.split(',')?.forEach((item) => {\n        if (item === '起点') {\n          if (a?.length) {\n            a = [...a, []]\n          } else {\n            a = [[]]\n          }\n        } else {\n          if (a?.length) {\n            a[a.length - 1] = [...a[a.length - 1], item]\n          } else {\n            a = [[item]]\n          }\n        }\n      })\n      res = a\n    }\n    downloadCSV(res)\n  }\n\n  return (\n    <Spin spinning={loading} tip='解析中'>\n      <div>\n        <Dragger\n          name='file'\n          fileList={[]}\n          beforeUpload={(file) => {\n            handleFileChange(file)\n          }}\n          className={'tools-daoru-dragger'}\n        >\n          <p className='ant-upload-drag-icon'>\n            <InboxOutlined />\n          </p>\n          <p className='ant-upload-text'>点击上传JCL文件</p>\n        </Dragger>\n        <div className={'tools-daoru-btns'}>\n          <Button type='primary' disabled={!shuju} className='tools-daoru-btn' onClick={copy}>\n            复制\n          </Button>\n          <Button disabled={!shuju} className='tools-daoru-btn' onClick={download}>\n            下载\n          </Button>\n          {/* <Button onClick={getDetail}>转换</Button> */}\n        </div>\n        {shuju && (\n          <div id='tools-daoru-zhuangbei-result' className={'tools-daoru-result'}>\n            {shuju}\n          </div>\n        )}\n      </div>\n    </Spin>\n  )\n}\n\nexport default JclSkillDaoru\n"],"names":["Dragger","Upload","useState","loading","setLoading","shuju","setShuju","workerRef","useRef","useEffect","current","Worker","URL","onmessage","event","data","length","join","message","terminate","spinning","tip","name","fileList","beforeUpload","file","e","reader","FileReader","readAsText","onload","result","postMessage","handleFileChange","className","InboxOutlined","type","disabled","onClick","res","document","getElementById","text","innerHTML","input","createElement","body","appendChild","setAttribute","select","execCommand","includes","removeChild","split","a","forEach","item","downloadCSV","id"],"sourceRoot":""}