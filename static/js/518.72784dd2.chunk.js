"use strict";(self.webpackChunkjx3dps_online=self.webpackChunkjx3dps_online||[]).push([[518],{5518:function(n,e,t){t.r(e),t.d(e,{default:function(){return I}});var i=t(1413),l=t(9439),o=t(2791),r=t(7896),d=t(7960),a=t(2556),s=t(3894),c=t(5405),u=t(3646),v=t(9089),f=t(4063),p=t(1211),x=t(959),m=t(5835),Z=t(9263),h=t(6776),j=t(9062),g=t(9286),y=t(6818),C=t(7128),P=t(7020),b=t(184),k=function(n){var e=n.\u5faa\u73af\u6807\u8bc6,t=n.\u8bbe\u7f6e\u5faa\u73af\u6807\u8bc6,i=(0,v.Z)().\u5168\u90e8\u5faa\u73af,r=void 0===i?[]:i,s=(0,o.useState)(),u=(0,l.Z)(s,2),f=u[0],p=u[1],x=(0,c.C)((function(n){var e;return null===n||void 0===n||null===(e=n.data)||void 0===e?void 0:e.\u81ea\u5b9a\u4e49\u5faa\u73af\u5217\u8868})),m=(0,o.useState)([]),Z=(0,l.Z)(m,2),h=Z[0],k=Z[1];(0,o.useEffect)((function(){k(null===x||void 0===x?void 0:x.map((function(n){return null===n||void 0===n?void 0:n.\u540d\u79f0})))}),[x]);var N=function(){f?null!==r&&void 0!==r&&r.some((function(n){return(null===n||void 0===n?void 0:n.\u540d\u79f0)===f}))||null!==h&&void 0!==h&&h.includes(f)?d.ZP.error("\u548c\u5df2\u5b58\u5728\u5faa\u73af\u552f\u4e00\u6807\u8bc6\u51b2\u7a81\uff0c\u8bf7\u66f4\u6362\u6807\u8bc6"):(k([].concat((0,j.Z)(h),[f])),p(void 0)):d.ZP.error("\u8bf7\u8f93\u5165\u5faa\u73af\u552f\u4e00\u6807\u8bc6")};return(0,b.jsx)(y.Z,{style:{width:"100%"},value:e,onChange:t,optionLabelProp:"label",placeholder:"\u8bf7\u9009\u62e9\u4f60\u8981\u8986\u76d6\u7684\u5faa\u73af",options:h.map((function(n){return{label:n,value:n}})),dropdownRender:function(n){return(0,b.jsxs)(b.Fragment,{children:[n,(0,b.jsx)(C.Z,{style:{margin:"8px 0"}}),(0,b.jsxs)("div",{className:"cycle-select-add-input-wrap",children:[(0,b.jsx)(P.Z,{placeholder:"\u8bf7\u8f93\u5165\u5faa\u73af\u6807\u8bc6",value:f,onChange:function(n){var e;return p(null===n||void 0===n||null===(e=n.target)||void 0===e?void 0:e.value)},onKeyDown:function(n){return n.stopPropagation()},onPressEnter:function(){return N()}}),(0,b.jsx)(a.ZP,{type:"text",icon:(0,b.jsx)(g.Z,{}),onClick:N,children:"\u521b\u5efa\u65b0\u5faa\u73af"})]})]})}})},N=p.Z.Dragger,S=function(n){var e=n.open,t=n.onCancel,i=(0,o.useState)(!1),r=(0,l.Z)(i,2),a=r[0],s=r[1],u=(0,o.useState)(),v=(0,l.Z)(u,2),p=v[0],j=v[1],g=(0,o.useState)(),y=(0,l.Z)(g,2),C=y[0],P=y[1],S=(0,c.T)(),w=(0,c.C)((function(n){var e;return null===n||void 0===n||null===(e=n.data)||void 0===e?void 0:e.\u81ea\u5b9a\u4e49\u5faa\u73af\u5217\u8868}));return(0,b.jsx)(x.Z,{open:e,onCancel:t,title:"\u5bfc\u5165\u5faa\u73af",onOk:function(n){if(C)if(p){var e=null!==w&&void 0!==w&&w.some((function(n){return(null===n||void 0===n?void 0:n.\u540d\u79f0)===C}))?w.map((function(n){return n.\u540d\u79f0===C?p:n})):(w||[]).concat([p]);S((0,f.Qs)(e)),d.ZP.success("\u5bfc\u5165\u6210\u529f"),null===t||void 0===t||t(n)}else d.ZP.error("\u8bf7\u5bfc\u5165\u6587\u4ef6");else d.ZP.error("\u8bf7\u9009\u62e9/\u8f93\u5165\u5faa\u73af\u6807\u8bc6")},children:(0,b.jsxs)(m.Z,{spinning:a,tip:"\u89e3\u6790\u4e2d",children:[(0,b.jsx)("div",{className:"cycle-setting-import-select-wrap",children:(0,b.jsx)(k,{"\u5faa\u73af\u6807\u8bc6":C,"\u8bbe\u7f6e\u5faa\u73af\u6807\u8bc6":P})}),null!==p&&void 0!==p&&p.\u540d\u79f0?(0,b.jsx)("div",{className:"cycle-setting-import-res",children:(0,b.jsx)(Z.Z,{type:"success",message:"\u8bc6\u522b\u5faa\u73af\uff1a".concat(null===p||void 0===p?void 0:p.\u540d\u79f0),closable:!0,afterClose:function(){return j(void 0)}})}):(0,b.jsx)("div",{children:(0,b.jsxs)(N,{name:"file",fileList:[],beforeUpload:function(n){!function(n){var e=n,t=new FileReader;s(!0),t.readAsText(e),t.onload=function(){if(t.result)try{var e=JSON.parse(t.result);null!==e&&void 0!==e&&e.\u540d\u79f0?j(e):d.ZP.error("\u5bfc\u5165\u5931\u8d25\uff0c\u8bf7\u68c0\u67e5\u6587\u4ef6\u683c\u5f0f")}catch(n){d.ZP.error("\u5bfc\u5165\u5931\u8d25\uff0c\u8bf7\u68c0\u67e5\u6587\u4ef6\u683c\u5f0f")}s(!1)}}(n)},className:"tools-daoru-dragger",children:[(0,b.jsx)("p",{className:"ant-upload-drag-icon",children:(0,b.jsx)(h.Z,{})}),(0,b.jsx)("p",{className:"ant-upload-text",children:"\u70b9\u51fb\u4e0a\u4f20\u6216\u62d6\u62fd\u4e0a\u4f20\u5faa\u73afJSON\u6587\u4ef6"})]})})]})})},w=(0,u.Z)().\u7f13\u5b58\u6620\u5c04;var I=function(){var n=r.Z.useApp().modal,e=(0,v.Z)().\u5168\u90e8\u5faa\u73af,t=void 0===e?[]:e,u=(0,o.useState)(!1),p=(0,l.Z)(u,2),x=p[0],m=p[1],Z=(0,c.C)((function(n){var e;return null===n||void 0===n||null===(e=n.data)||void 0===e?void 0:e.\u81ea\u5b9a\u4e49\u5faa\u73af\u5217\u8868})),h=(0,c.T)();return(0,o.useEffect)((function(){var n,e={};(Z||[]).forEach((function(n){e[n.\u540d\u79f0]=(0,i.Z)({},n)})),null===(n=localStorage)||void 0===n||n.setItem(w.\u81ea\u5b9a\u4e49\u5faa\u73af,JSON.stringify(e))}),[Z]),(0,b.jsxs)("div",{children:[(0,b.jsx)("div",{className:"cycle-setting-btns",children:(0,b.jsx)(a.ZP,{type:"primary",className:"cycle-setting-btn",onClick:function(){return m(!0)},children:"\u5bfc\u5165\u5faa\u73af"})}),(0,b.jsx)(S,{open:x,onCancel:function(){return m(!1)}}),(0,b.jsx)(s.Z,{dataSource:t,size:"small",pagination:!1,scroll:{y:500},columns:[{title:"\u552f\u4e00\u6807\u8bc6",dataIndex:"\u540d\u79f0"},{title:"\u5faa\u73af\u6807\u9898",dataIndex:"\u6807\u9898",render:function(n,e){return(null===e||void 0===e?void 0:e.\u6807\u9898)||(null===e||void 0===e?void 0:e.\u540d\u79f0)}},{title:"\u63d0\u4f9b\u8005",dataIndex:"\u63d0\u4f9b\u8005"},{title:"\u7c7b\u578b",dataIndex:"\u7c7b\u578b",width:80},{title:"\u6807\u8bb0",dataIndex:"\u6807\u8bb0",width:80},{title:"\u64cd\u4f5c",dataIndex:"\u64cd\u4f5c",render:function(e,t){var i=null===Z||void 0===Z?void 0:Z.some((function(n){return(null===n||void 0===n?void 0:n.\u540d\u79f0)===(null===t||void 0===t?void 0:t.\u540d\u79f0)}));return(0,b.jsxs)("div",{className:"cycle-setting-list-btns",children:[(0,b.jsx)(a.ZP,{size:"small",type:"link",onClick:function(){return function(n){var e=document.createElement("a");e.setAttribute("href","data:text/plain;charset=utf-8,"+encodeURIComponent(JSON.stringify(n))),e.setAttribute("download","\u8ba1\u7b97\u5668\u6570\u636e\u8fc1\u79fb.json"),e.style.display="none",document.body.appendChild(e),e.click(),document.body.removeChild(e),d.ZP.success("\u5faa\u73af\u5df2\u5bfc\u51fa")}(t)},children:"\u5bfc\u51fa"}),i?(0,b.jsx)(b.Fragment,{children:(0,b.jsx)(a.ZP,{size:"small",type:"link",danger:!0,onClick:function(){return e=t,void n.confirm({title:"\u786e\u5b9a\u8981\u5220\u9664\u5faa\u73af".concat(null===e||void 0===e?void 0:e.\u540d\u79f0,"\u5417\uff1f"),content:"\u5220\u9664\u540e\u5c06\u65e0\u6cd5\u6062\u590d",onOk:function(){var n=null===Z||void 0===Z?void 0:Z.filter((function(n){return(null===n||void 0===n?void 0:n.\u540d\u79f0)!==(null===e||void 0===e?void 0:e.\u540d\u79f0)}));h((0,f.Qs)(n)),d.ZP.success("\u5220\u9664\u6210\u529f")}});var e},children:"\u5220\u9664"})}):null]})}}]})]})}}}]);
//# sourceMappingURL=518.72784dd2.chunk.js.map